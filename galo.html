<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ideal Gas Law With Michii LMS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <!-- Toastr & SheetJS untuk notifikasi & Excel -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary-color: #00f2ff; /* Cyan Neon */
            --secondary-color: #7000ff; /* Purple Neon */
            --bg-dark: #0a0e17;
            --panel-bg: rgba(20, 30, 48, 0.8);
            --text-light: #e0e6ed;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            background-image: radial-gradient(circle at 50% 50%, #1a253a 0%, #0a0e17 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        /* --- Utility Classes --- */
        .hidden { display: none !important; }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }
        .btn-primary { background: var(--primary-color); color: #000; box-shadow: 0 0 10px var(--primary-color); }
        .btn-secondary { background: var(--secondary-color); color: #fff; }
        .btn:hover { transform: scale(1.05); }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0 15px;
            border-radius: 5px;
            border: 1px solid var(--primary-color);
            background: rgba(0,0,0,0.5);
            color: white;
        }
        /* Partikel Gas */
        .particles {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        .particle {
            position: absolute;
            width: 6px; height: 6px;
            background: rgba(0, 242, 255, 0.5);
            border-radius: 50%;
            box-shadow: 0 0 4px var(--primary-color);
        }
        /* Landing Page */
        #landing-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            text-align: center;
            position: relative;
        }
        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5rem;
            color: var(--primary-color);
            text-shadow: 0 0 20px var(--primary-color);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        .formula-container {
            background: rgba(10, 20, 40, 0.7);
            display: inline-block;
            padding: 15px 40px;
            border-radius: 15px;
            border: 2px solid var(--primary-color);
            margin: 20px auto;
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.3);
        }
        .formula {
            font-family: 'Orbitron', monospace;
            font-size: 2.2rem;
            color: white;
            letter-spacing: 3px;
        }
        .formula span { color: var(--primary-color); }
        /* Login & Dashboard */
        .login-card {
            background: var(--panel-bg);
            padding: 40px;
            border-radius: 15px;
            border: 1px solid var(--primary-color);
            width: 380px;
            backdrop-filter: blur(10px);
        }
        .role-switch {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        .role-btn {
            background: transparent;
            color: var(--text-light);
            border: 1px solid var(--text-light);
            padding: 5px 15px;
        }
        .role-btn.active {
            background: var(--primary-color);
            color: black;
            border-color: var(--primary-color);
        }
        #dashboard-layout {
            display: flex;
            height: 100vh;
        }
        .sidebar {
            width: 250px;
            background: rgba(10, 14, 23, 0.95);
            border-right: 1px solid var(--secondary-color);
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        .sidebar h3 { font-family: 'Orbitron', sans-serif; color: var(--primary-color); margin-bottom: 30px; text-align: center; }
        .nav-link {
            display: block;
            padding: 12px;
            margin-bottom: 10px;
            color: var(--text-light);
            text-decoration: none;
            border-radius: 5px;
            transition: 0.3s;
        }
        .nav-link:hover, .nav-link.active { background: var(--secondary-color); }
        .badge {
            background: #e74c3c; color: white; border-radius: 10px; padding: 2px 8px;
            font-size: 0.7rem; margin-left: auto; display: none;
        }
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }
        .content-header {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 15px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card {
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
        }
        .teacher-controls {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px dashed var(--primary-color);
        }
        iframe { width: 100%; height: 500px; border: none; border-radius: 10px; background: #1a1a1a; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { color: var(--primary-color); }
        .lkpd-section { margin-bottom: 25px; }
        .lkpd-title { margin-top: 0; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 8px; }
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar { width: 70px; }
            .sidebar h3, .nav-link span { display: none; }
            .nav-link { justify-content: center; }
            .main-content { padding: 15px; }
        }
    </style>
</head>
<body>
    <!-- Halaman Depan Baru -->
    <div id="landing-page">
        <div class="particles" id="particles"></div>
        <h1 class="logo"><i class="fas fa-atom"></i> HUKUM GAS IDEAL</h1>
        <p style="font-size:1.3rem; max-width:700px; margin:0 auto 20px;">
            Eksplorasi Dunia Termodinamika melalui Simulasi Interaktif & Evaluasi Real-Time
        </p>
        <div class="formula-container">
            <div class="formula">P ¬∑ V = n ¬∑ R ¬∑ <span>T</span></div>
        </div>
        <button class="btn btn-primary" onclick="showPage('login-page')">
            <i class="fas fa-arrow-right"></i> Mulai Belajar
        </button>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="hidden">
        <div class="login-card">
            <h2 style="text-align:center; margin-bottom:20px; color:var(--primary-color);">
                <i class="fas fa-user-lock"></i> Portal Login
            </h2>
            <div class="role-switch">
                <button class="btn role-btn active" id="btn-role-teacher" onclick="switchLoginRole('teacher')">Guru</button>
                <button class="btn role-btn" id="btn-role-student" onclick="switchLoginRole('student')">Siswa</button>
            </div>
            <form id="login-form" onsubmit="handleLogin(event)">
                <label>Email</label>
                <input type="email" id="email" placeholder="email@contoh.com" required>
                <label>Password</label>
                <input type="password" id="password" placeholder="********" required>
                <div id="student-code-area" class="hidden">
                    <label>Kode Kelas</label>
                    <input type="text" id="class-code" placeholder="PHYSICS_HGI">
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%; margin-top:10px;">
                    <i class="fas fa-sign-in-alt"></i> Masuk
                </button>
                <p style="margin-top:15px; text-align:center; font-size:0.8rem; cursor:pointer;" onclick="showPage('landing-page')">
                    Kembali ke Home
                </p>
            </form>
        </div>
    </div>>

    <div id="dashboard-layout" class="hidden">
        <div class="sidebar">
            <h3><i class="fas fa-atom"></i> MICHII LMS</h3>
            <a href="#" class="nav-link active" onclick="loadModule('home')"><i class="fas fa-home"></i> Dashboard</a>
            <a href="#" class="nav-link" onclick="loadModule('attendance')"><i class="fas fa-clipboard-check"></i> Absensi</a>
            <a href="#" class="nav-link" onclick="loadModule('apperception')"><i class="fas fa-video"></i> Video Apersepsi</a>
            <a href="#" class="nav-link" onclick="loadModule('reading')"><i class="fas fa-book-open"></i> Bahan Bacaan</a>
            <a href="#" class="nav-link" onclick="loadModule('application')"><i class="fas fa-rocket"></i> Penerapan</a>
            <a href="#" class="nav-link" onclick="loadModule('lkpd')"><i class="fas fa-file-alt"></i> LKPD</a>
            <a href="#" class="nav-link" onclick="loadModule('virtuallab')"><i class="fas fa-flask"></i> Lab Virtual</a>
            <a href="#" class="nav-link" onclick="loadModule('evaluation')"><i class="fas fa-poll"></i> Evaluasi</a>
            
            <a href="#" class="nav-link logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Keluar</a>
        </div>

        <div class="main-content" id="main-content-area">
            </div>
    </div>

    <script>
        // --- STATE MANAGEMENT ---
        let currentUser = null; // 'teacher' or 'student'
        let currentModule = 'home';

        // --- NAVIGATION FUNCTIONS ---
        function showPage(pageId) {
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('dashboard-layout').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        function switchLoginRole(role) {
            document.getElementById('btn-role-teacher').classList.remove('active');
            document.getElementById('btn-role-student').classList.remove('active');
            
            if (role === 'teacher') {
                document.getElementById('btn-role-teacher').classList.add('active');
                document.getElementById('student-code-area').classList.add('hidden');
            } else {
                document.getElementById('btn-role-student').classList.add('active');
                document.getElementById('student-code-area').classList.remove('hidden');
            }
        }

        // --- AUTHENTICATION ---
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const isTeacherTab = document.getElementById('btn-role-teacher').classList.contains('active');

            if (isTeacherTab) {
                if (email === 'gurufisika23@gmail.com' && password === 'Fisika.igs23') {
                    currentUser = 'teacher';
                    showToast('Login Guru Berhasil', 'success');
                    showPage('dashboard-layout');
                    loadModule('home');
                } else {
                    showToast('Email atau Password Guru Salah', 'error');
                }
            } else {
                const code = document.getElementById('class-code').value;
                if (code === 'PHYSICS_HGI' && email && password) {
                    currentUser = 'student';
                    showToast('Login Siswa Berhasil', 'success');
                    showPage('dashboard-layout');
                    loadModule('home');
                } else {
                    showToast('Cek Email, Password, atau Kode Kelas', 'error');
                }
            }
        }

        function logout() {
            currentUser = null;
            document.getElementById('login-form').reset();
            showPage('landing-page');
        }

        // --- DYNAMIC CONTENT RENDERING ---
        function loadModule(moduleName) {
            currentModule = moduleName;
            const contentArea = document.getElementById('main-content-area');
            
            // Update active link
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            // (Simple visual active state handling skipped for brevity)

            let htmlContent = '';

            // 1. DASHBOARD HOME
            if (moduleName === 'home') {
                htmlContent = `
                    <div class="content-header">
                        <h2>Halo, ${currentUser === 'teacher' ? 'anak-anak' : 'Siswa'}!</h2>
                    </div>
                    <div class="card">
                        <h3>Pengumuman Kelas</h3>
                        <p>Selamat datang di materi Hukum Gas Ideal. Silakan mulai dengan mengisi Absensi kemudian menonton Video Apersepsi.</p>
                    
                        </p>
        <div style="background:#f8f9fa;padding:25px;border-radius:15px;max-width:800px;margin:20px auto;">
            <h3 style="color:(--primary);margin-top:0;">üéØ Apa yang Akan Kita Pelajari?</h3>
            <p>Hukum Gas Ideal adalah salah satu konsep penting dalam termodinamika yang menjelaskan hubungan antara tekanan (P), volume (V), suhu (T), dan jumlah mol gas (n). Melalui LMS ini, kamu akan:</p>
            <ul style="text-align:left;columns:2;column-gap:40px;margin-top:10px;">
                <li>üîç Mengenal hukum-hukum dasar gas (Boyle, Charles, Gay-Lussac, Avogadro)</li>
                <li>üß™ Menjelajahi simulasi laboratorium virtual PhET tentang sifat gas</li>
                <li>üì∫ Menonton video konseptual & contoh penerapan nyata</li>
                <li>üìù Mengerjakan LKPD interaktif dan latihan soal</li>
                <li>üìä Mengikuti pre-test & post-test untuk mengukur pemahamanmu</li>
                <li>üì§ Mengumpulkan tugas berbasis proyek (foto/video/observasi)</li>
            </ul>
        </div>
        <div style="display:flex;gap:20px;margin:20px 0;">
            <div style="text-align:center;"><h2 style="color:var(--primary);margin:0;">P ¬∑ V= n ¬∑ R ¬∑ T</p></div>
        </div>
                `;
            } 
            
            // 2. ABSENSI (UPDATED: Real-time Data Simulation & Excel Export)
            else if (moduleName === 'attendance') {
                // Ambil data dari LocalStorage (Simulasi Database)
                let attendanceData = JSON.parse(localStorage.getItem('attendanceData')) || [];
                
                // Hitung data hari ini untuk notifikasi guru
                const today = new Date().toISOString().split('T')[0];
                const todaysEntries = attendanceData.filter(item => item.date === today);

                htmlContent = `
                    <div class="content-header"><h2>Absensi Kelas</h2></div>
                    
                    ${currentUser === 'teacher' ? `
                        <div class="teacher-controls">
                            <h4>Dashboard Guru <span class="teacher-badge">Admin</span></h4>
                            
                            <div style="background: rgba(0, 242, 255, 0.1); padding: 10px; border-radius: 5px; margin: 10px 0; border-left: 3px solid var(--primary-color);">
                                <i class="fas fa-bell" style="color: yellow;"></i> 
                                <strong>Notifikasi:</strong> Ada <span style="color: var(--primary-color); font-weight: bold; font-size: 1.2em;">${todaysEntries.length}</span> siswa yang telah melakukan absensi hari ini.
                            </div>

                            <button class="btn btn-primary" onclick="exportToExcel()"><i class="fas fa-file-excel"></i> Ekspor Data ke Excel</button>
                            <button class="btn btn-secondary" onclick="resetAttendanceData()"><i class="fas fa-trash"></i> Reset Data</button>
                        </div>

                        <div class="card">
                            <h3>Rekap Kehadiran Siswa</h3>
                            <table id="attendance-table">
                                <thead>
                                    <tr style="background: var(--primary-color); color: black;">
                                        <th>Tanggal</th>
                                        <th>Waktu</th>
                                        <th>Nama Siswa</th>
                                        <th>Status</th>
                                        <th>Keterangan</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${attendanceData.length > 0 ? attendanceData.map(item => `
                                        <tr>
                                            <td>${item.date}</td>
                                            <td>${item.time}</td>
                                            <td>${item.name}</td>
                                            <td><span style="padding: 2px 8px; border-radius: 4px; background: ${item.status === 'Hadir' ? 'green' : (item.status === 'Sakit' ? 'orange' : 'red')}">${item.status}</span></td>
                                            <td>${item.note || '-'}</td>
                                        </tr>
                                    `).join('') : `<tr><td colspan="5" style="text-align:center; padding: 20px;">Belum ada data absensi masuk.</td></tr>`}
                                </tbody>
                            </table>
                        </div>
                    ` : 
                    
                    // TAMPILAN SISWA
                    `
                        <div class="card">
                            <h3>Formulir Kehadiran</h3>
                            <p style="margin-bottom: 20px; color: gray;">Silakan isi kehadiran anda hari ini.</p>
                            
                            <form onsubmit="handleStudentAttendance(event)">
                                <label>Nama Lengkap</label>
                                <input type="text" id="student-name" placeholder="Nama Anda..." required>
                                
                                <label>Status Kehadiran</label>
                                <select id="student-status" class="bubble-input" style="background: rgba(0,0,0,0.5); border: 1px solid var(--primary-color);">
                                    <option value="Hadir">Hadir</option>
                                    <option value="Izin">Izin</option>
                                    <option value="Sakit">Sakit</option>
                                </select>

                                <label>Keterangan (Opsional)</label>
                                <textarea id="student-note" placeholder="Isi jika sakit/izin..." rows="2" style="background: rgba(0,0,0,0.5); width: 100%; border: 1px solid var(--primary-color); color: white; padding: 10px;"></textarea>
                                
                                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 15px;">
                                    <i class="fas fa-paper-plane"></i> Kirim Absensi
                                </button>
                            </form>
                        </div>
                    `}
                `;
            }

           
           // 3. VIDEO APERSEPSI (UPDATED SESUAI TRANSKRIP)
            else if (moduleName === 'apperception') {
                const teacherControls = currentUser === 'teacher' ? `
                    <div class="teacher-controls">
                        <h3><i class="fa-solid fa-gear"></i> Panel Guru</h3>
                        <button class="btn btn-primary"><i class="fa-solid fa-upload"></i> Ganti Video</button>
                        <button class="btn btn-secondary"><i class="fa-solid fa-edit"></i> Edit Deskripsi</button>
                    </div>` : '';

                htmlContent = `
                    <div class="content-header"><h2>Video Apersepsi</h2></div>
                    ${teacherControls}
                    
                    <div class="card">
                        <h3 style="color: var(--primary-color); margin-bottom: 15px;">Kelas Fisika: Hukum-Hukum Gas Ideal</h3>
                        
                        <div class="video-wrapper">
                            <video controls poster="poster-image.jpg">
                                <source src="Apersepsi.mp4" type="video/mp4">
                                Browser Anda tidak mendukung tag video.
                            </video>
                        </div>

                        <div style="padding: 15px; background: rgba(0, 242, 255, 0.05); border-radius: 8px; border-left: 4px solid var(--success); margin-bottom: 20px;">
                            <p><strong><i class="fa-solid fa-chalkboard-user"></i> Pengajar:</strong> Ibu Michell Butarbutar</p>
                            <hr style="border-color: rgba(255,255,255,0.1); margin: 10px 0;">
                            <p style="margin-top:5px; color: #cbd5e1; line-height: 1.6;">
                                Halo adik-adik! Pada pertemuan kali ini kita akan membahas tentang <strong>Hukum-Hukum Gas Ideal</strong>.
                                Kita akan berkenalan dengan tokoh penting seperti <em>Boyle, Charles, dan Gay-Lussac. Sebelum kalian memulai perjalanan belajar tentang Hukum-Hukum Gas Ideal, mari kita mulai dengan memahami dulu apa itu gas ideal ‚Äî konsep dasar yang akan menjadi fondasi bagi semua hukum gas yang akan kita pelajari.</em>.
                                <br><br>
                                <strong>Pernahkah kalian perhatikan:</strong>
                                <ul>
                                    <li>Kenapa balon dapat mengembang saat dSitiup?</li>
                                    <li>Dan kenapa ban sepeda mengempis saat cuaca dingin?</li>
                                </ul>
                                <br>
                                Mari kita ungkap rahasia di balik tingkah laku gas yang terjadi diam-diam dalam kehidupan kita!
                            </p>
                        </div>
                        
            
                            
        
                            </div>
                        </div>
                    </div>
                `;
            }
            // 4. BAHAN BACAAN (UPDATED: Embed Heyzine Flipbook)
            else if (moduleName === 'reading') {
                htmlContent = `
                    <div class="content-header">
                        <h2>Bahan Ajar Digital: Hukum Gas Ideal</h2>
                    </div>
                    
                    ${currentUser === 'teacher' ? `
                        <div class="teacher-controls" style="margin-bottom: 15px;">
                            <button class="btn btn-primary"><i class="fas fa-edit"></i> Ganti Link Flipbook</button>
                            <p style="margin-top:5px; font-size:0.9em; color:gray;">Sumber: Heyzine Flipbooks</p>
                        </div>
                    ` : ''}

                    <div class="card" style="padding: 0; overflow: hidden; height: 80vh; border: 2px solid var(--primary-color);">
                        <iframe 
                            src="https://heyzine.com/flip-book/6609dd1c04.html" 
                            width="100%" 
                            height="100%" 
                            frameborder="0" 
                            allowfullscreen 
                            style="border:none; background-color: #1a1a1a;">
                        </iframe>
                    </div>
                `;
            }

            // 5. PENERAPAN (UPDATED: YouTube Autoplay)
            else if (moduleName === 'application') {
                htmlContent = `
                    <div class="content-header"><h2>Contoh Penerapan</h2></div>
                    
                    ${currentUser === 'teacher' ? `
                        <div class="teacher-controls">
                            <button class="btn btn-primary">Upload Video/File</button>
                            <input type="text" placeholder="Paste Link Youtube/Artikel" value="https://www.youtube.com/embed/BxUS1K7xu30?si=1FFyaW-jqsvL9hUn ">
                            <textarea placeholder="Penjelasan teks..."></textarea>
                        </div>
                    ` : ''}

                    <div class="card">
                        <h3>Penerapan Hukum Gas Ideal</h3>
                        <p>Simak video berikut untuk memahami penerapan hukum gas ideal dalam kehidupan sehari-hari.</p>
                        
                        <div class="video-wrapper" style="margin-top: 15px;">
                            <iframe 
                                width="100%" 
                                height="100%" 
                                src="https://www.youtube.com/embed/BxUS1K7xu30?si=1FFyaW-jqsvL9hUn " 
                                title="YouTube video player" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <p style="font-size: 0.9rem; color: #aaa; margin-top: 10px;">
                            *Video akan diputar otomatis (mode mute aktif agar kompatibel dengan browser).
                        </p>
                    </div>
                `;
            }

// 6. LKPD (LENGKAP: FLIPBOOK DI ATAS + FITUR UPLOAD + SESUAI PDF)
            else if (moduleName === 'lkpd') {
                htmlContent = `
                    <div class="content-header"><h2>E-LKPD Digital</h2></div>
                    
                    ${currentUser === 'teacher' ? `
                        <div class="teacher-controls">
                            <button class="btn btn-primary"><i class="fas fa-eye"></i> Monitor Jawaban Siswa</button>
                            <button class="btn btn-secondary"><i class="fas fa-pen"></i> Edit Konten</button>
                        </div>
                    ` : ''}

                    <div class="card" style="max-height: 85vh; overflow-y: auto; padding: 30px;">
                        
                        <div class="lkpd-section" style="border: 2px solid var(--primary-color); padding: 20px; border-radius: 15px; background: rgba(0, 242, 255, 0.05); margin-bottom: 40px;">
                            <h3 class="lkpd-title" style="margin-top:0; border:none; text-align:center;">Buku Panduan E-LKPD (Flipbook)</h3>
                            <p style="text-align:center; color:gray; margin-bottom:15px;">Silakan baca panduan di bawah ini atau klik tombol untuk layar penuh.</p>
                            
                            <div style="position: relative; width: 100%; height: 500px; overflow: hidden; border-radius: 10px; border: 1px solid #555;">
                                <iframe 
                                    src="https://heyzine.com/flip-book/34f8e8f779.html" 
                                    width="100%" 
                                    height="100%" 
                                    frameborder="0" 
                                    allowfullscreen 
                                    style="border:none;">
                                </iframe>
                            </div>

                            <div style="text-align: center; margin-top: 15px;">
                                <a href="https://heyzine.com/flip-book/34f8e8f779.html" target="_blank" class="btn btn-secondary" style="text-decoration:none; display:inline-block; border-radius: 30px;">
                                    <i class="fas fa-expand"></i> Buka Layar Penuh
                                </a>
                            </div>
                        </div>
                        <div class="lkpd-header">
                            <h4 style="letter-spacing: 3px; color: gray; margin-bottom: 10px;">KURIKULUM MERDEKA</h4>
                            <h1 style="font-family: 'Orbitron', sans-serif; color: var(--primary-color); font-size: 2.5rem; margin-bottom: 10px;">HUKUM-HUKUM GAS IDEAL</h1>
                            <p style="font-size: 1.2rem; margin-bottom: 20px;">Untuk Kelas XI</p>
                            
                            <div style="background: var(--bg-dark); padding: 15px 40px; border-radius: 50px; border: 2px solid var(--secondary-color); display: inline-block; margin-bottom: 30px; box-shadow: 0 0 15px var(--secondary-color);">
                                <h2 style="margin:0; font-family: monospace; color: white;">P.V = n.R.T</h2>
                            </div>

                            <div style="text-align: left; max-width: 500px; margin: 0 auto;">
                                <div class="bubble-box" style="margin-bottom: 10px;">
                                    <label class="bubble-label">Nama:</label>
                                    <input type="text" class="bubble-input" style="padding: 10px;" placeholder="Ketik Nama Anda...">
                                </div>
                                <div class="bubble-box">
                                    <label class="bubble-label">Kelas:</label>
                                    <input type="text" class="bubble-input" style="padding: 10px;" placeholder="Ketik Kelas Anda...">
                                </div>
                            </div>
                            <p style="margin-top: 20px; font-size: 0.9rem; color: gray;">DISUSUN OLEH : MICHELL BUTARBUTAR</p>
                        </div>

                        <div class="lkpd-section">
                            <h3 class="lkpd-title">A. TUJUAN</h3>
                            <ol style="margin-left: 25px; line-height: 1.8;">
                                <li>Siswa menyelidiki hubungan tekanan dengan volume gas dalam ruang tertutup pada suhu tetap pada hukum Boyle.</li>
                                <li>Menganalisis teori kinetik gas dan karakteristik gas pada ruang tertutup.</li>
                            </ol>
                        </div>

                        <div class="lkpd-section">
                            <h3 class="lkpd-title">B. ALAT DAN BAHAN</h3>
                            <ol style="margin-left: 25px; line-height: 1.8;">
                                <li>Laptop / Komputer PC</li>
                                <li>Laboratorium Virtual / PhET Simulation</li>
                            </ol>
                        </div>

                        <div class="lkpd-section">
                            <h3 class="lkpd-title">C. PROSEDUR PERCOBAAN</h3>
                            <h4 style="color: var(--text-light); margin-bottom: 15px; text-decoration: underline;">HUKUM BOYLE</h4>
                            
                            <div style="background: rgba(255,255,255,0.03); padding: 20px; border-radius: 15px;">
                                <ol style="margin-left: 20px; line-height: 1.8;">
                                    
                                    <li style="margin-bottom: 25px;">
                                        Buka perangkat lunak PhET Interactive Simulations pada browser komputer/laptop/smartphone yang terhubung dengan koneksi internet dengan mengakses laman: <a href="https://phet.colorado.edu/" target="_blank" style="color:var(--primary-color);">https://phet.colorado.edu/</a>
                                    </li>

                                    <li style="margin-bottom: 25px;">
                                        Klik menu "Simulations", kemudian pilih sub menu "Fisika", pada gambar di bawah.
                                        
                                        <div class="img-upload-container">
                                            <img id="img-1" class="uploaded-img hidden">
                                            <div id="placeholder-1" class="img-placeholder">
                                                <i class="fas fa-image fa-3x"></i>
                                                <p>[Gambar 1: Tampilan Menu PhET]</p>
                                            </div>
                                            ${currentUser === 'teacher' ? `
                                                <label class="upload-btn-label">
                                                    <i class="fas fa-camera"></i> Upload Gambar
                                                    <input type="file" onchange="updateImage(this, 'img-1', 'placeholder-1')" style="display:none" accept="image/*">
                                                </label>
                                            ` : ''}
                                        </div>
                                    </li>

                                    <li style="margin-bottom: 25px;">
                                        Pilih simulasi "Gas Properties" pada gambar di bawah ini!
                                        
                                        <div class="img-upload-container">
                                            <img id="img-2" class="uploaded-img hidden">
                                            <div id="placeholder-2" class="img-placeholder">
                                                <i class="fas fa-flask fa-3x"></i>
                                                <p>[Gambar 2: Pilih Gas Properties]</p>
                                            </div>
                                            ${currentUser === 'teacher' ? `
                                                <label class="upload-btn-label">
                                                    <i class="fas fa-camera"></i> Upload Gambar
                                                    <input type="file" onchange="updateImage(this, 'img-2', 'placeholder-2')" style="display:none" accept="image/*">
                                                </label>
                                            ` : ''}
                                        </div>
                                    </li>

                                    <li style="margin-bottom: 25px;">
                                        Klik tombol "play" pada tampilan simulasi Gas Ideal. Kemudian pilih "Ideal" seperti tampilan gambar di bawah ini.
                                        
                                        <div class="img-upload-container">
                                            <img id="img-3" class="uploaded-img hidden">
                                            <div id="placeholder-3" class="img-placeholder">
                                                <i class="fas fa-mouse-pointer fa-3x"></i>
                                                <p>[Gambar 3: Menu Ideal]</p>
                                            </div>
                                            ${currentUser === 'teacher' ? `
                                                <label class="upload-btn-label">
                                                    <i class="fas fa-camera"></i> Upload Gambar
                                                    <input type="file" onchange="updateImage(this, 'img-3', 'placeholder-3')" style="display:none" accept="image/*">
                                                </label>
                                            ` : ''}
                                        </div>
                                    </li>

                                    <li style="margin-bottom: 25px;">
                                        Tekan handle pompa untuk memasukkan gas. Kemudian pada "hold constant" pilih "temperature", lalu amati suhu yang tertera pada termometer. Suhu tersebut merupakan nilai T tetap.
                                        
                                        <div class="img-upload-container">
                                            <img id="img-4" class="uploaded-img hidden">
                                            <div id="placeholder-4" class="img-placeholder">
                                                <i class="fas fa-thermometer-half fa-3x"></i>
                                                <p>[Gambar 4: Pengaturan Hold Constant]</p>
                                            </div>
                                            ${currentUser === 'teacher' ? `
                                                <label class="upload-btn-label">
                                                    <i class="fas fa-camera"></i> Upload Gambar
                                                    <input type="file" onchange="updateImage(this, 'img-4', 'placeholder-4')" style="display:none" accept="image/*">
                                                </label>
                                            ` : ''}
                                        </div>
                                    </li>

                                    <li style="margin-bottom: 25px;">
                                        Ukur panjang kotak, dengan mengklik "width". Penggaris akan muncul di bagian bawah layar, kemudian catat nilai panjang kotak awal (10 Nm).
                                        
                                        <div class="img-upload-container">
                                            <img id="img-5" class="uploaded-img hidden">
                                            <div id="placeholder-5" class="img-placeholder">
                                                <i class="fas fa-ruler-horizontal fa-3x"></i>
                                                <p>[Gambar 5: Mengukur Panjang Awal]</p>
                                            </div>
                                            ${currentUser === 'teacher' ? `
                                                <label class="upload-btn-label">
                                                    <i class="fas fa-camera"></i> Upload Gambar
                                                    <input type="file" onchange="updateImage(this, 'img-5', 'placeholder-5')" style="display:none" accept="image/*">
                                                </label>
                                            ` : ''}
                                        </div>
                                    </li>

                                    <li style="margin-bottom: 15px;">Amati tekanan yang tertera pada Barometer. Pilih nilai tekanan terbesar yang terbaca kemudian catat hasilnya pada tabel di bawah.</li>
                                    <li style="margin-bottom: 15px;">Ubahlah ukuran kotak menggunakan pengatur ukuran panjang kotak untuk percobaan selanjutnya yaitu 12 Nm, 13 Nm, 14 Nm, dan 15 Nm.</li>
                                    <li style="margin-bottom: 15px;">Ulangi langkah pencatatan tekanan untuk setiap variasi panjang kotak tersebut.</li>
                                </ol>
                            </div>
                        </div>

                        <div class="lkpd-section">
                            <h3 class="lkpd-title">TABEL PENGUMPULAN DATA</h3>
                            
                            <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid var(--primary-color);">
                                <h4 style="margin: 0; color: var(--text-light);">HUKUM BOYLE</h4>
                                <p>Hubungan antara tekanan dengan volume, pada temperatur konstan</p>
                            </div>

                            <div class="bubble-box" style="width: 200px;">
                                <label class="bubble-label">T = .............. K</label>
                                <input type="number" class="bubble-input" style="padding: 10px; text-align: center;">
                            </div>

                            <div style="overflow-x:auto;">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>NO</th>
                                            <th>Volume (V)<br>(nm / m¬≥)</th>
                                            <th>Tekanan (P)<br>(atm)</th>
                                            <th>P.V</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${[1, 2, 3, 4].map(num => `
                                        <tr>
                                            <td style="text-align: center; font-weight: bold; background: rgba(0,0,0,0.2);">${num}</td>
                                            <td><input type="number" placeholder="..."></td>
                                            <td><input type="number" placeholder="..."></td>
                                            <td><input type="number" placeholder="..."></td>
                                        </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="lkpd-section">
                            <h3 class="lkpd-title">PENGOLAHAN DATA</h3>
                            
                            <div class="bubble-box">
                                <label class="bubble-label">1. Jelaskan hubungan panjang dengan volume gas pada percobaan ini?</label>
                                <textarea class="bubble-input" rows="3" placeholder="Tulis jawaban analisis Anda di sini..."></textarea>
                            </div>

                            <div class="bubble-box">
                                <label class="bubble-label">2. Apakah hasil perkalian antara tekanan dan volume (P.V) pada data percobaan ini mendekati nilai konstan? Jelaskan!</label>
                                <textarea class="bubble-input" rows="3" placeholder="Tulis jawaban analisis Anda di sini..."></textarea>
                            </div>

                            <div class="bubble-box">
                                <label class="bubble-label">3. Pada percobaan ini jika gas terus ditambahkan hingga mencapai tekanan maksimal, apa yang akan terjadi? Jelaskan!</label>
                                <textarea class="bubble-input" rows="3" placeholder="Tulis jawaban analisis Anda di sini..."></textarea>
                            </div>

                            <div class="bubble-box">
                                <label class="bubble-label">4. Mengapa terjadi perubahan tekanan ketika volume kotak diubah?</label>
                                <textarea class="bubble-input" rows="3" placeholder="Tulis jawaban analisis Anda di sini..."></textarea>
                            </div>
                        </div>

                        <div class="lkpd-section">
                            <h3 class="lkpd-title">MENYAJIKAN HASIL KARYA</h3>
                            <div class="bubble-box">
                                <label class="bubble-label">Apa kesimpulan yang kalian peroleh setelah melakukan percobaan hukum Boyle ini?</label>
                                <textarea class="bubble-input" rows="4" placeholder="Tulis kesimpulan akhir Anda di sini..."></textarea>
                            </div>
                        </div>

                        <div class="lkpd-section" style="border-bottom: none;">
                            <h3 class="lkpd-title">EVALUASI</h3>
                            
                            <div class="bubble-box">
                                <label class="bubble-label">1. Jelaskan hubungan panjang dengan volume gas pada percobaan yang telah di lakukan?</label>
                                <textarea class="bubble-input" rows="3" placeholder="Jawab evaluasi 1..."></textarea>
                            </div>

                            <div class="bubble-box">
                                <label class="bubble-label">2. Apakah hasil perkalian antara tekanan dan volume (P.V) pada data percobaan yang telah dilakukan mendekati nilai konstan? Jelaskan!</label>
                                <textarea class="bubble-input" rows="3" placeholder="Jawab evaluasi 2..."></textarea>
                            </div>

                            <div class="bubble-box">
                                <label class="bubble-label">3. Pada percobaan yang telah di lakukan, jika gas terus di tambahkan hingga mencapai tekanan maksimal, apa yang terjadi? Jelaskan!</label>
                                <textarea class="bubble-input" rows="3" placeholder="Jawab evaluasi 3..."></textarea>
                            </div>
                        </div>

                        ${currentUser === 'student' ? `
                            <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid var(--primary-color);">
                                <h3 style="color: var(--primary-color); margin-bottom: 15px;">GOOD LUCK & SELAMAT MENGERJAKAN!</h3>
                                <button class="btn btn-primary" onclick="showToast('LKPD Lengkap Berhasil Dikirim ke Guru!', 'success')" style="width: 100%; padding: 15px; border-radius: 30px; font-size: 1.1rem; box-shadow: 0 0 20px var(--primary-color);">
                                    <i class="fas fa-paper-plane"></i> KIRIM SEMUA JAWABAN
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `;
            }
            // 7. LAB VIRTUAL
            else if (moduleName === 'virtuallab') {
                htmlContent = `
                    <div class="content-header"><h2>Lab Virtual (PhET Simulation)</h2></div>
                    ${currentUser === 'teacher' ? `
                         <div class="teacher-controls">
                            <p><strong>Panduan Guru:</strong> Tambahkan instruksi eksperimen di bawah ini.</p>
                            <textarea placeholder="Langkah 1: Buka tab Ideal..." rows="2"></textarea>
                        </div>
                    ` : ''}
                    <div class="card" style="padding:0; overflow:hidden;">
                        <iframe src="https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_all.html" allowfullscreen></iframe>
                    </div>
                    <div class="card">
                        <h3>Panduan Eksperimen</h3>
                        <p>üåü Petunjuk Penggunaan Simulasi PhET: Hukum Gas Ideal
                            <br>
Halo, siswa yang luar biasa!
<br> Sebelum kalian memulai eksplorasi dengan simulasi Gas Properties dari PhET, simak baik-baik petunjuk berikut agar kalian dapat memahami konsep Hukum Gas Ideal secara lebih mendalam dan menyenangkan.


<br>1üîπ Langkah Awal
Buka Simulasi
Klik tombol ‚ÄúIdeal‚Äù di bagian atas simulasi untuk fokus pada perilaku gas ideal (bukan gas nyata).
Masukkan Gas ke dalam Wadah
Gunakan pump handle (pompa di kiri bawah) ‚Äî gerakkan naik-turun beberapa kali untuk memasukkan partikel gas ke dalam wadah.

<br>2üîπ Mengatur Variabel
Di kanan atas simulasi, terdapat menu ‚ÄúHold Constant‚Äù ‚Äî pilih salah satu variabel yang ingin kalian jaga tetap (konstan), misalnya:

‚úÖ Temperature (T) ‚Üí untuk menyelidiki Hukum Boyle (hubungan P dan V),
‚úÖ Pressure (P) ‚Üí untuk menyelidiki Hukum Charles (hubungan V dan T),
‚úÖ Volume (V) ‚Üí untuk menyelidiki Hukum Gay-Lussac (hubungan P dan T).

<br>3üîπ Pengukuran & Observasi
Aktifkan Width (lebar) untuk mengukur volume wadah dalam satuan nm.
Perhatikan Barometer (pengukur tekanan) dan Thermometer (pengukur suhu).
Ubah ukuran wadah (piston) atau tambahkan/kurangi partikel gas, lalu amati perubahan tekanan, volume, dan suhu.

<br>4üîπ Catatan Penting
Suhu dalam simulasi ditampilkan dalam satuan Kelvin (K) ‚Äî sesuai syarat hukum gas ideal.
Gunakan tombol ‚ÄúReset‚Äù jika ingin mengulang eksperimen dari awal.
Jangan lupa mencatat data secara teliti di tabel pengamatan kalian..</p>
                    </div>
                `;
            }

            // 8. EVALUASI (UPDATED WITH QR CODE IMAGES)
            else if (moduleName === 'evaluation') {
                htmlContent = `
                    <div class="content-header"><h2>Evaluasi Pembelajaran</h2></div>
                    <div style="display:flex; gap:10px; margin-bottom:20px;">
                        <button class="btn btn-secondary" onclick="document.getElementById('post-test').classList.add('hidden'); document.getElementById('pre-test').classList.remove('hidden');">Pre-Test</button>
                        <button class="btn btn-secondary" onclick="document.getElementById('pre-test').classList.add('hidden'); document.getElementById('post-test').classList.remove('hidden');">Post-Test</button>
                    </div>

                    ${currentUser === 'teacher' ? `
                     <div class="teacher-controls">
                <p>Upload Soal (Link/Foto/Video)</p>
                <button class="btn btn-primary">Upload Materi Tes</button>
            </div>    
                    ` : ''}

                    <div id="pre-test" class="card">
                        <h3>Pre-Test</h3>
                        <p>Scan QR Code berikut untuk mengerjakan soal Pre-Test.</p>
                        <div class="qr-container">
                            <img src="Cuplikan layar 2025-12-02 054139.png" alt="QR Code Pre-Test" class="qr-img">
                            <p style="margin-top: 10px; color: #ccc; font-size: 0.8rem;">(https://wordwall.net/resource/103334576)</p>
                        </div>
                    </div>

                    <div id="post-test" class="card hidden">
                        <h3>Post-Test</h3>
                        <p>Scan QR Code berikut untuk mengerjakan soal Post-Test.</p>
                        <div class="qr-container">
                            <img src="Cuplikan layar 2025-12-02 054238.png" alt="QR Code Pre-Test" class="qr-img">
                            <p style="margin-top: 10px; color: #ccc; font-size: 0.8rem;">(https://wordwall.net/resource/103336164)</p>
                        </div>
                    </div>
                `;
            }

            contentArea.innerHTML = htmlContent;
        }

        // --- UTILS ---
        function showToast(message, type) {
            alert((type === 'success' ? '‚úÖ ' : '‚ùå ') + message);
        }
        
        function updateImage(input, imgId, placeholderId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById(imgId).src = e.target.result;
                    document.getElementById(imgId).classList.remove('hidden');
                    document.getElementById(placeholderId).classList.add('hidden');
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

    </script>
</body>
</html>